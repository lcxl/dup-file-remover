{"openapi":"3.1.0","info":{"title":"utoipa-actix-web","description":"Utoipa's actix-web bindings for seamless integration of the two","contact":{"name":"Juha Kukkonen","email":"juha7kukkonen@gmail.com"},"license":{"name":"MIT OR Apache-2.0","identifier":"MIT OR Apache-2.0"},"version":"0.1.2"},"paths":{"/api/list":{"get":{"summary":"List files","operationId":"list_files","parameters":[{"name":"page_no","in":"query","description":"Page number, start from 1","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"page_count","in":"query","description":"Page count, must be greater than 0","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"min_file_size","in":"query","description":"Minimum file size","required":false,"schema":{"type":["integer","null"],"format":"int64"}},{"name":"max_file_size","in":"query","description":"Max file size","required":false,"schema":{"type":["integer","null"],"format":"int64"}},{"name":"dir_path","in":"query","description":"Dir path of the directory containing the file","required":false,"schema":{"type":["string","null"]}},{"name":"file_name","in":"query","description":"File name filtering","required":false,"schema":{"type":["string","null"]}},{"name":"file_extension","in":"query","description":"New field for file extension filtering","required":false,"schema":{"type":["string","null"]}}],"responses":{"200":{"description":"The list of file info with md5 count","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FileInfoWithMd5Count"}}}}}}}},"/api/scan/start":{"post":{"summary":"Start a new file scan","operationId":"start_scan","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScanRequest"}}},"required":true},"responses":{"200":{"description":"Scan started successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RestResponse_i64"}}}},"409":{"description":"Scan already in progress"}}}},"/api/scan/stop":{"post":{"summary":"Stop the current file scan","operationId":"stop_scan","responses":{}}}},"components":{"schemas":{"FileInfo":{"type":"object","required":["inode_info","dir_path","file_path","file_name","version","scan_time"],"properties":{"dir_path":{"type":"string","description":"Dir path of the directory containing the file"},"file_extension":{"type":["string","null"],"description":"File extension"},"file_name":{"type":"string","description":"File name"},"file_path":{"type":"string","description":"File path"},"inode_info":{"$ref":"#/components/schemas/InodeInfo","description":"Inode info"},"scan_time":{"type":"string","format":"date-time","description":"scan_time is the time when the file was last scanned"},"version":{"type":"integer","format":"int64","description":"version is the version of the file, used to track changes","minimum":0}}},"FileInfoWithMd5Count":{"type":"object","description":"File info with md5 count","required":["file_info","md5_count"],"properties":{"file_info":{"$ref":"#/components/schemas/FileInfo"},"md5_count":{"type":"integer","minimum":0}}},"InodeInfo":{"type":"object","description":"Inode info","required":["inode","dev_id","permissions","nlink","uid","gid","created","modified","size"],"properties":{"created":{"type":"string","format":"date-time"},"dev_id":{"type":"integer","format":"int64","description":"Device ID","minimum":0},"gid":{"type":"integer","format":"int32","minimum":0},"inode":{"type":"integer","format":"int64","description":"Inode number","minimum":0},"md5":{"type":["string","null"],"description":"File md5"},"modified":{"type":"string","format":"date-time"},"nlink":{"type":"integer","format":"int64","minimum":0},"permissions":{"type":"integer","format":"int32","minimum":0},"size":{"type":"integer","format":"int64","description":"File size","minimum":0},"uid":{"type":"integer","format":"int32","minimum":0}}},"RestResponse_i64":{"type":"object","required":["success","code"],"properties":{"code":{"type":"integer","format":"int32"},"data":{"type":"integer","format":"int64"},"message":{"type":["string","null"]},"success":{"type":"boolean"}}},"ScanRequest":{"type":"object","required":["scan_path"],"properties":{"scan_path":{"type":"string","description":"Scan path"}}}}}}